{"ast":null,"code":"import _asyncToGenerator from \"/Users/abhishreetripathi/Desktop/angulars2d2l1deploy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from \"axios\";\nimport * as i0 from \"@angular/core\";\nexport class GetDataService {\n  getProducts() {\n    return _asyncToGenerator(function* () {\n      try {\n        let data = localStorage.getItem(\"data\");\n        let gotData = [];\n        if (!data) {\n          let res = yield axios.get(\"https://fakestoreapi.com/products\");\n          gotData = res.data.map(ele => {\n            delete ele?.rating;\n            return {\n              ...ele,\n              fav: false\n            };\n          });\n        } else {\n          gotData = JSON.parse(data);\n        }\n        localStorage.setItem(\"data\", JSON.stringify(gotData));\n        return gotData;\n      } catch (error) {\n        return Promise.reject(error);\n      }\n    })();\n  }\n  constructor() {}\n  static #_ = this.ɵfac = function GetDataService_Factory(t) {\n    return new (t || GetDataService)();\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: GetDataService,\n    factory: GetDataService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["axios","GetDataService","getProducts","_asyncToGenerator","data","localStorage","getItem","gotData","res","get","map","ele","rating","fav","JSON","parse","setItem","stringify","error","Promise","reject","constructor","_","_2","factory","ɵfac","providedIn"],"sources":["/Users/abhishreetripathi/Desktop/angulars2d2l1deploy/src/app/get-data.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport axios from \"axios\"\nimport { Product } from './product';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GetDataService {\n  \n\n  async getProducts():Promise<Product[]>{\n\n    try {\n      let data:string|null = localStorage.getItem(\"data\") \n      let gotData = []\n      if(!data){\n        let res = await  axios.get(\"https://fakestoreapi.com/products\")\n       \n        gotData = res.data.map((ele:{id:number,title:string,price:number,description:string,category:string,image:string,rating?:{rate:number,count:number}})=>{\n          delete ele?.rating\n          return {...ele,fav:false}\n        })\n      }else{\n        gotData = JSON.parse(data)\n      }\n      localStorage.setItem(\"data\",JSON.stringify(gotData))\n      return gotData as Product[]\n    } catch (error) {\n\n      return Promise.reject(error)\n  }\n    \n  }\n  constructor() { \n    \n  }\n}\n"],"mappings":";AACA,OAAOA,KAAK,MAAM,OAAO;;AAMzB,OAAM,MAAOC,cAAc;EAGnBC,WAAWA,CAAA;IAAA,OAAAC,iBAAA;MAEf,IAAI;QACF,IAAIC,IAAI,GAAeC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;QACnD,IAAIC,OAAO,GAAG,EAAE;QAChB,IAAG,CAACH,IAAI,EAAC;UACP,IAAII,GAAG,SAAUR,KAAK,CAACS,GAAG,CAAC,mCAAmC,CAAC;UAE/DF,OAAO,GAAGC,GAAG,CAACJ,IAAI,CAACM,GAAG,CAAEC,GAA4H,IAAG;YACrJ,OAAOA,GAAG,EAAEC,MAAM;YAClB,OAAO;cAAC,GAAGD,GAAG;cAACE,GAAG,EAAC;YAAK,CAAC;UAC3B,CAAC,CAAC;SACH,MAAI;UACHN,OAAO,GAAGO,IAAI,CAACC,KAAK,CAACX,IAAI,CAAC;;QAE5BC,YAAY,CAACW,OAAO,CAAC,MAAM,EAACF,IAAI,CAACG,SAAS,CAACV,OAAO,CAAC,CAAC;QACpD,OAAOA,OAAoB;OAC5B,CAAC,OAAOW,KAAK,EAAE;QAEd,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;;IAC/B;EAED;EACAG,YAAA,GAEA;EAAC,QAAAC,CAAA,G;qBA5BUrB,cAAc;EAAA;EAAA,QAAAsB,EAAA,G;WAAdtB,cAAc;IAAAuB,OAAA,EAAdvB,cAAc,CAAAwB,IAAA;IAAAC,UAAA,EAFb;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}